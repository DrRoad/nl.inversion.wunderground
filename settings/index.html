<!doctype html>
<html>
<head>

</head>
<body>

<h1 data-i18n="settings.app.title"></h1>
<p data-i18n="settings.app.description"></p>

<form id="locationform">
    <fieldset name="location">
    <legend>
      <label data-i18n="settings.app.location.location"></label>
    </legend>
<!--
    <p>
    <div class="field">
        <input id="autolocation" type="checkbox" checked = true
            onchange="locationform.locationfields.disabled = checked">
        <label data-i18n="settings.app.location.autolocation"></label>
    </div>
    </p>
-->
    <fieldset name="locationfields">    
    <legend>
      <label data-i18n="settings.app.location.manual_location"></label>
    </legend>
        
    <div class="field row">
        <label data-i18n="settings.app.location.country"></label>
        <input id="country" type="text" value=""/>
    </div>

    <div class="field row">
        <label data-i18n="settings.app.location.city"></label>
        <input id="city" type="text" value=""/>
    </div>

    <div class="field row">
        <label data-i18n="settings.app.location.update_frequenty"></label>
        <input id="updateFrequenty" type="number" value="10"/>
    </div>
    </fieldset>
  </fieldset>
</form>

<button class="right" id="saver" onclick="save()" data-i18n="settings.app.button.save"></button>

<script type="text/javascript">
    function onHomeyReady(){
        Homey.get('country', function(err, country) {
            if (err) {
                console.error(err)
            } else {
                document.getElementById('country').value = country
            }
        })

        Homey.get('city', function(err, city) {
            if (err) {
                console.error(err)
            } else {
                document.getElementById('city').value = city
            }
        })

        Homey.get('updateFrequenty', function(err, updateFrequenty) {
            if (err) {
                console.error(err)
            } else {
                document.getElementById('updateFrequenty').value = updateFrequenty
            }
        })
        
        Homey.get('autolocation', function(err, autolocation) {
            if (err) {
                console.error(err)
            } else {
                document.getElementById('autolocation').value = autolocation
            }
        })

        Homey.ready()
    }
    function save() {
        Homey.set('country', document.getElementById('country').value);
        Homey.set('city', document.getElementById('city').value);
        Homey.set('updateFrequenty', document.getElementById('updateFrequenty').value);
        Homey.set('autolocation', document.getElementById('autolocation').value);
    }
</script>

</body>
</html>